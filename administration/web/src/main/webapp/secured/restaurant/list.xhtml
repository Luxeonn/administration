<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/masterLayout.xhtml"
	xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:define name="pageTitle">#{out.pageTitle}</ui:define>
	<ui:define name="content">
		<a href="#{request.contextPath}/secured/restaurant/create.xhtml"
			class="btn btn-info" title="#{out.create}"> <b>#{out.create}</b>
		</a>
		<h:form id="restaurantForm">
			<p:dataTable var="restaurant"
				value="#{restaurantLazyBean.lazyDataModel}" paginator="true"
				rows="10" rowsPerPageTemplate="5,10,50" id="carTable" lazy="true"
				selectionMode="single" selection="#{restaurantEditBean.selected}"
				rowKey="#{restaurant.id}"
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}">
				<p:ajax event="rowSelect"
					listener="#{restaurantEditBean.onRowSelect}"
					update=":restaurantForm:carDetail"
					oncomplete="PF('carDialog').show()" />
				<p:column headerText="ID">
					<h:outputText value="#{restaurant.id}" />
				</p:column>
				<p:column headerText="#{out.restaurantName}"
					sortBy="#{restaurant.name}" filterBy="#{restaurant.name}">
					<h:outputText value="#{restaurant.name}" />
				</p:column>
				<p:column headerText="#{out.restaurantAddress}"
					sortBy="#{restaurant.address}" filterBy="#{restaurant.address}">
					<h:outputText value="#{restaurant.address}" />
				</p:column>
				<p:column headerText="#{out.restaurantPhoneNumber}"
					sortBy="#{restaurant.phoneNumber}"
					filterBy="#{restaurant.phoneNumber}">
					<h:outputText value="#{restaurant.phoneNumber}" />
				</p:column>

				<p:column headerText="#{out.restaurantPrice}"
					sortBy="#{restaurant.price}">
					<h:outputText value="#{restaurant.price}" />
				</p:column>
			</p:dataTable>

			<p:dialog header="#{out.edit}" widgetVar="carDialog" modal="true"
				showEffect="fade" hideEffect="fade" resizable="false">
				<p:panel id="carDetail" style="text-align:center;">
					<p:panelGrid columns="3"
						rendered="#{not empty restaurantEditBean.selected}">

						<p:outputLabel for="name" value="#{out.restaurantName }" />
						<p:inputText id="name" value="#{restaurantEditBean.selected.name}"
							required="false" label="#{out.restaurantName }">
							<f:validator validatorId="nameValidator" />
							<p:ajax update="nameMsg" event="keyup" />
						</p:inputText>
						<p:message for="name" id="nameMsg" />


						<p:outputLabel for="address" value="#{out.restaurantAddress }" />
						<p:inputText id="address"
							value="#{restaurantEditBean.selected.address}" required="false"
							label="#{out.restaurantAddress }">
							<f:validator validatorId="addressValidator" />
							<p:ajax update="addressMsg" event="keyup" />
						</p:inputText>

						<p:message for="address" id="addressMsg" />

						<p:outputLabel for="phoneNumber"
							value="#{out.restaurantPhoneNumber }" />
						<p:inputMask id="phoneNumber"
							value="#{restaurantEditBean.selected.phoneNumber}"
							required="false" label="#{out.restaurantPrice }"
							mask="9999999?9999" maxlength="11" slotChar=" ">
							<f:validator validatorId="phoneNumberValidator" />
							<p:ajax update="phoneNumberMsg" event="keyup" />

						</p:inputMask>
						<p:message for="phoneNumber" id="phoneNumberMsg" />


						<p:outputLabel for="price" value="#{out.restaurantPrice }" />
						<p:inputMask id="price"
							value="#{restaurantEditBean.selected.price}" required="false"
							label="#{out.restaurantPrice }" mask="9?9" maxlength="2"
							slotChar=" ">
							<f:validator validatorId="priceValidator" />
							<p:ajax update="priceMsg" event="keyup" />
						</p:inputMask>
						<p:message for="price" id="priceMsg" />


						<p:commandButton value="#{out.save_button}" update="carDetail"
							actionListener="#{restaurantEditBean.modify}"
							icon="ui-icon-check" id="save_status" />
						<p:message for="save_status" />
					</p:panelGrid>
				</p:panel>
			</p:dialog>
		</h:form>
	</ui:define>

</ui:composition>